<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ask Me?</title>
  </head>
  <body class="qwerty">
    <img class="picture" src="logo2.jpg" alt="seylek logo" />
    <div class="container">
      <!-- <div style="display: flex; flex-direction: column;"> -->
      <div id="you"></div>
      <div id="AI"></div>
      <!-- </div> -->
    </div>
    <div class="input-container">
      <input type="text" id="user-id" /><img
        class="icon"
        src="icons8-up-arrow-64.png"
        alt=""
        onclick="sendMessage()"
      />
    </div>
    <style>
      .container {
        border: 2px solid red;
        padding: 10px 10px;
        height: 400px;
        width: 60%;
        margin-left: 20%;
        background-image: url("doodle5.jpg");
        background-repeat: repeat;
        background-color: white;
        border-radius: 20px;
        overflow-y: auto;
      }

      .input-container {
        width: 40%;
        margin-left: 30%;
        position: relative;
        top: 430px;
        align-items: center;
        justify-content: center;
        display: flex;
      }
      input {
        width: 85%;
        border-radius: 20px;
        padding: 10px;
        margin-right: 10px;
        border-color: blue;
      }

      .qwerty {
        background-image: url("ash.jpg");
        background-repeat: no-repeat;
        background-size: cover;
      }
      .picture {
        margin-left: 29%;
        border-radius: 70px;
      }
      .container {
        position: absolute;
        top: 170px;
      }
      .icon {
        width: 35px;
        border-radius: 30px;
        cursor: pointer;
      }
     #you, #AI {
  display: flex;
  flex-direction: column;  /* Stack messages vertically */
  overflow-y: auto;        /* Allow scrolling */
  max-height: 400px;       /* Set a max height */
}

.user-baloon, .user-baloon2 {
  padding: 10px;
  border-radius: 20px;
  margin-bottom: 10px;
}

.user-baloon {
  background-color: rgba(18, 133, 240, 0.5); /* AI response balloon color */
}

.user-baloon2 {
  background-color: rgba(255, 0, 0, 0.336); /* User message balloon color */
  color: #fff;
}

.user-icon {
  width: 35px;
  border-radius: 50%;
}

    </style>
<script>
  const userId = document.getElementById("user-id");
const you = document.getElementById("you");
const AI = document.getElementById("AI");
const apiKey = "AIzaSyAGDUHZwjYMsUkUO5lWc95pnu96H4WUCNo"; // Your API key

async function sendMessage() {
  const message = userId.value.trim();
  if (!message) return;

  // Clear input field after sending the message
  userId.value = "";

  // Step 1: Append the user's message to the "you" section
  const userMessageDiv = document.createElement("div");
  userMessageDiv.style.display = "flex";
  userMessageDiv.style.marginBottom = "10px";

  const userImageDiv = document.createElement("div");
  userImageDiv.style.display = "flex";
  userImageDiv.style.flexDirection = "column";
  userImageDiv.style.marginRight = "10px";

  const userImage = document.createElement("img");
  userImage.src = "icons8-user-icon-100.png";
  userImage.classList.add("user-icon");

  const userLabel = document.createElement("strong");
  userLabel.style.color = "#fff";
  userLabel.textContent = "You:";

  const userMessageBalloon = document.createElement("div");
  userMessageBalloon.classList.add("user-baloon2");
  const userMessageText = document.createElement("p");
  userMessageText.textContent = message;
  userMessageBalloon.appendChild(userMessageText);

  userImageDiv.appendChild(userImage);
  userImageDiv.appendChild(userLabel);
  userMessageDiv.appendChild(userImageDiv);
  userMessageDiv.appendChild(userMessageBalloon);

  you.appendChild(userMessageDiv); // Append user message to "you" section

  // Scroll to the bottom so the user can see their message
  you.scrollTop = you.scrollHeight;

  // Step 2: Send the message to AI and get a response
  try {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`,
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          contents: [
            {
              parts: [
                {
                  text: message,
                },
              ],
            },
          ],
        }),
      }
    );

    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }

    const data = await response.json();
    const reply = data.candidates[0].content.parts[0].text;

    // Step 3: Append the AI's response to the "AI" section
    const aiMessageDiv = document.createElement("div");
    aiMessageDiv.style.display = "flex";
    aiMessageDiv.style.marginBottom = "10px";

    const aiImageDiv = document.createElement("div");
    aiImageDiv.style.display = "flex";
    aiImageDiv.style.flexDirection = "column";
    aiImageDiv.style.marginLeft = "10px";

    const aiImage = document.createElement("img");
    aiImage.src = "icons8-robot-48.png";
    aiImage.classList.add("user-icon");

    const aiLabel = document.createElement("strong");
    aiLabel.style.color = "#fff";
    aiLabel.textContent = "Jeson:";

    const aiMessageBalloon = document.createElement("div");
    aiMessageBalloon.classList.add("user-baloon");
    const aiMessageText = document.createElement("p");
    aiMessageText.textContent = reply;
    aiMessageBalloon.appendChild(aiMessageText);

    aiImageDiv.appendChild(aiImage);
    aiImageDiv.appendChild(aiLabel);
    aiMessageDiv.appendChild(aiImageDiv);
    aiMessageDiv.appendChild(aiMessageBalloon);

    AI.appendChild(aiMessageDiv); // Append AI response to "AI" section

    // Scroll to the bottom to make sure both sections are updated with new content
    AI.scrollTop = AI.scrollHeight;

  } catch (error) {
    // If an error occurs, show it in the AI section
    const errorMessageDiv = document.createElement("div");
    errorMessageDiv.style.display = "flex";
    errorMessageDiv.style.marginBottom = "10px";

    const errorImageDiv = document.createElement("div");
    errorImageDiv.style.display = "flex";
    errorImageDiv.style.flexDirection = "column";
    errorImageDiv.style.marginLeft = "10px";

    const errorImage = document.createElement("img");
    errorImage.src = "icons8-robot-48.png";
    errorImage.classList.add("user-icon");

    const errorLabel = document.createElement("strong");
    errorLabel.style.color = "#fff";
    errorLabel.textContent = "Jeson:";

    const errorMessageBalloon = document.createElement("div");
    errorMessageBalloon.classList.add("user-baloon");
    const errorMessageText = document.createElement("p");
    errorMessageText.textContent = error.message;
    errorMessageBalloon.appendChild(errorMessageText);

    errorImageDiv.appendChild(errorImage);
    errorImageDiv.appendChild(errorLabel);
    errorMessageDiv.appendChild(errorImageDiv);
    errorMessageDiv.appendChild(errorMessageBalloon);
    AI.appendChild(errorMessageDiv); // Append error message to AI section

    // Scroll to the bottom to show the error message
    AI.scrollTop = AI.scrollHeight;
  }
}

</script>





  </body>
</html>
